<mat-form-field appearance="{{ appearance }}" fxFlex [style.fontSize.px]=12 [ngClass]="{'hasLookup': hasLookup}">
  <mat-label>{{label}}</mat-label>
  <input
    matInput
    #inputElement
    [value]="value"
    [type]="type"
    [id]="id"
    [placeholder]="placeholder"
    [readonly]="readonly"
    (change)="onChange($event)"
    (keyup)="onKeyup($event)"
    (blur)="onBlur($event)"
    >

    <mat-select #lookupElement *ngIf="hasLookup" style="width: 0px;"
      (selectionChange)="onLookupSelect($event)"
      disableOptionCentering
    >
      <mat-option *ngFor="let record of lookupRows | async" [value]="getLookupValue(record)">
        {{getLookupDisplay(record)}}
      </mat-option>
    </mat-select>

</mat-form-field>
<div *ngIf="hasLookup" style="width: 25px;">
  <span
     class="material-icons lookupDropDawn" [ngClass]="{'loading': lookupIsLoading}"
    *ngIf="hasLookup && !lookupIsLoading"
    (click)="onLookupOpen()"
  >
  arrow_drop_down
  </span>
  <div *ngIf="lookupIsLoading" class="spinner-border spinner-border-sm"></div>
</div>
<sit-refresh-button *ngIf="showRefreshButton" tooltip="Odśwież"></sit-refresh-button>

